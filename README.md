autocannon -c 500 -d 20 -p 100 http://localhost:8000/api/trpc/hello
Running 20s test @ http://localhost:8000/api/trpc/hello
500 connections with 100 pipelining factor


┌─────────┬────────┬────────┬────────┬────────┬───────────┬──────────┬─────────┐
│ Stat    │ 2.5%   │ 50%    │ 97.5%  │ 99%    │ Avg       │ Stdev    │ Max     │
├─────────┼────────┼────────┼────────┼────────┼───────────┼──────────┼─────────┤
│ Latency │ 223 ms │ 231 ms │ 245 ms │ 248 ms │ 232.09 ms │ 26.65 ms │ 1099 ms │
└─────────┴────────┴────────┴────────┴────────┴───────────┴──────────┴─────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬───────────┬──────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg       │ Stdev    │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼──────────┼─────────┤
│ Req/Sec   │ 191,615 │ 191,615 │ 216,319 │ 219,519 │ 214,041.6 │ 6,000.34 │ 191,500 │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼──────────┼─────────┤
│ Bytes/Sec │ 31.4 MB │ 31.4 MB │ 35.5 MB │ 36 MB   │ 35.1 MB   │ 987 kB   │ 31.4 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴───────────┴──────────┴─────────┘

Req/Bytes counts sampled once per second.
# of samples: 20

4331k requests in 20.07s, 702 MB read

# benchmark 2
autocannon -c 1000 -d 20 -p 100 http://localhost:8000/api/trpc/hello
Running 20s test @ http://localhost:8000/api/trpc/hello
1000 connections with 100 pipelining factor


┌─────────┬────────┬────────┬────────┬────────┬───────────┬──────────┬─────────┐
│ Stat    │ 2.5%   │ 50%    │ 97.5%  │ 99%    │ Avg       │ Stdev    │ Max     │
├─────────┼────────┼────────┼────────┼────────┼───────────┼──────────┼─────────┤
│ Latency │ 391 ms │ 468 ms │ 486 ms │ 491 ms │ 469.18 ms │ 58.71 ms │ 1428 ms │
└─────────┴────────┴────────┴────────┴────────┴───────────┴──────────┴─────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬───────────┬─────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg       │ Stdev   │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼─────────┼─────────┤
│ Req/Sec   │ 178,175 │ 178,175 │ 213,119 │ 216,831 │ 211,116.8 │ 8,018.9 │ 178,170 │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼─────────┼─────────┤
│ Bytes/Sec │ 29.2 MB │ 29.2 MB │ 35 MB   │ 35.6 MB │ 34.6 MB   │ 1.31 MB │ 29.2 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴───────────┴─────────┴─────────┘

Req/Bytes counts sampled once per second.
# of samples: 20

4323k requests in 20.14s, 693 MB read

# benchmark 3
autocannon -c 1000 -d 20 -p 200 http://localhost:8000/api/trpc/hello
Running 20s test @ http://localhost:8000/api/trpc/hello
1000 connections with 200 pipelining factor


┌─────────┬────────┬─────────┬─────────┬─────────┬────────────┬───────────┬─────────┐
│ Stat    │ 2.5%   │ 50%     │ 97.5%   │ 99%     │ Avg        │ Stdev     │ Max     │
├─────────┼────────┼─────────┼─────────┼─────────┼────────────┼───────────┼─────────┤
│ Latency │ 673 ms │ 1405 ms │ 1423 ms │ 1425 ms │ 1367.98 ms │ 177.98 ms │ 2757 ms │
└─────────┴────────┴─────────┴─────────┴─────────┴────────────┴───────────┴─────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬───────────┬──────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg       │ Stdev    │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼──────────┼─────────┤
│ Req/Sec   │ 131,839 │ 131,839 │ 142,079 │ 143,487 │ 141,574.4 │ 2,431.15 │ 131,806 │
├───────────┼─────────┼─────────┼─────────┼─────────┼───────────┼──────────┼─────────┤
│ Bytes/Sec │ 21.6 MB │ 21.6 MB │ 23.3 MB │ 23.5 MB │ 23.2 MB   │ 397 kB   │ 21.6 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴───────────┴──────────┴─────────┘

Req/Bytes counts sampled once per second.
# of samples: 20

3031k requests in 20.18s, 464 MB read


# benchmark 
general
40m, 0%

low memory and cpu using
150m，100%

# trpc-uWebSockets.js 安装
pnpm add uNetworking/uWebSockets.js
